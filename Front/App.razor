@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Navigation

<Router AppAssembly="@typeof(App).Assembly">
    <Found Context="routeData">
        <CascadingAuthenticationState>
            <AuthorizeRouteView RouteData="@routeData" DefaultLayout="@typeof(MainLayout)">
                <NotAuthorized>
                    <RedirectOnUnauthorized />
                </NotAuthorized>
                <Authorizing>
                    <div class="flex items-center justify-center h-screen text-gray-600 text-xl">
                        <div class="animate-spin mr-3 h-6 w-6 border-t-2 border-blue-600 rounded-full"></div>
                        Authorizing...
                    </div>
                </Authorizing>
            </AuthorizeRouteView>

            <FocusOnNavigate RouteData="@routeData" Selector="h1" />
        </CascadingAuthenticationState>
    </Found>

    <NotFound>
        <PageTitle>Page Not Found</PageTitle>
        <div class="flex flex-col items-center justify-center min-h-screen text-center bg-gray-50 px-4">
            <div class="text-7xl mb-6 text-red-500">🚫</div>
            <h1 class="text-4xl font-extrabold text-gray-800 mb-2">Oops! Page not found</h1>
            <p class="text-lg text-gray-600 mb-6">
                Sorry, there's nothing at this address.
            </p>
            <button @onclick="GoBack"
                    class="inline-flex items-center bg-blue-600 text-white font-semibold px-4 py-2 rounded-lg shadow-md hover:bg-blue-700 transition">
                ⬅️ Go back
            </button>
        </div>
    </NotFound>
</Router>

@code {
    private void GoBack() => Navigation.NavigateTo("javascript:history.back()");
}
